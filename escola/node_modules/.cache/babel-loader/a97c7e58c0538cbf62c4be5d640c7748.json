{"ast":null,"code":"var _jsxFileName = \"/Users/u21816/escola/DsWebIII/escola/src/components/Carometro/Carometro.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport axios from 'axios';\nimport './Carometro.css'; //import Card from 'react-bootstrap/Card';\n//import 'bootstrap'\n\nimport Main from '../template/Main';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL_ALUNOS = \"http://localhost:5255/api/aluno\";\nconst API_URL_CURSOS = \"http://localhost:5255/api/curso\";\n\nconst getRandomLetter = () => {\n  return Math.random().toString(36).substring(2, 9);\n};\n\nexport default function CrudCarometro(props) {\n  _s();\n\n  const initialState = {\n    curso: {\n      id: 0,\n      codCurso: \"\",\n      nomeCurso: \"\",\n      periodo: \"\"\n    },\n    listaAlunos: [],\n    listaCursos: []\n  };\n  const title = \"Carômetro dos Alunos\";\n  const [listaAlunos, setListaAlunos] = useState(initialState.listaAlunos);\n  const [listaCursos, setListaCursos] = useState(initialState.listaCursos);\n  const [curso, setCurso] = useState(initialState.curso);\n  useEffect(() => {\n    axios(API_URL_CURSOS).then(resp => setListaCursos(resp.data)).catch(err => {\n      console.log(err); //sendMultipleErrorPopUp(err);\n    });\n  }, []);\n\n  const atualizarListaAlunos = async event => {\n    const codCurso = event.target.value;\n\n    if (event.target.value === \"\") {\n      setListaAlunos(initialState.listaAlunos);\n      setCurso(initialState.curso);\n      return;\n    }\n\n    curso.codCurso = Number(codCurso);\n    const listaDeAlunos = await getListaAlunosDoCurso(curso.codCurso);\n    if (!Array.isArray(listaDeAlunos)) return;\n    setListaAlunos(listaDeAlunos);\n    setCurso(curso);\n  };\n\n  const getListaAlunosDoCurso = async codCurso => {\n    return await axios(API_URL_ALUNOS).then(resp => {\n      const listaDeAlunos = resp.data;\n      return listaDeAlunos.filter(aluno => aluno.codCurso === codCurso);\n    }).catch(err => {\n      console.log(err); //sendMultipleErrorPopUp(err);\n    });\n  };\n\n  const renderSelect = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"select-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \" Curso: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        className: \"selectCarometro\",\n        value: curso.codCurso,\n        onChange: e => {\n          atualizarListaAlunos(e);\n        },\n        required: true,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          disabled: true,\n          value: \"\",\n          children: \"  -- Escolha um curso -- \"\n        }, \"\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this), listaCursos.map(curso => /*#__PURE__*/_jsxDEV(\"option\", {\n          name: \"codCurso\",\n          value: curso.codCurso,\n          children: [curso.codCurso, \" - \", curso.nomeCurso, \" : \", curso.periodo]\n        }, curso.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 29\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this);\n  };\n\n  const renderCards = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card-row\",\n    children: Array.isArray(listaAlunos) && listaAlunos.length > 0 ? listaAlunos.map(aluno => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card draw-border\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"card__image\",\n        src: `https://avatars.dicebear.com/api/big-smile/${getRandomLetter()}.svg`,\n        alt: `Avatar de ` + aluno.nome\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"card-title\",\n        children: aluno.nome\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"card-description\",\n        children: [\"RA: \", aluno.ra, \" | Curso: \", aluno.codCurso]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 21\n      }, this)]\n    }, aluno.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }, this)) : null\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 9\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container carometro\",\n    children: [/*#__PURE__*/_jsxDEV(Main, {\n      title: title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }, this), renderSelect(), /*#__PURE__*/_jsxDEV(\"main\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-container\",\n        children: renderCards()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 9\n  }, this);\n}\n\n_s(CrudCarometro, \"27UJdzKLXF+xt/FXziFaBVtlQoE=\");\n\n_c = CrudCarometro;\n\nvar _c;\n\n$RefreshReg$(_c, \"CrudCarometro\");","map":{"version":3,"names":["React","useState","useEffect","axios","Main","API_URL_ALUNOS","API_URL_CURSOS","getRandomLetter","Math","random","toString","substring","CrudCarometro","props","initialState","curso","id","codCurso","nomeCurso","periodo","listaAlunos","listaCursos","title","setListaAlunos","setListaCursos","setCurso","then","resp","data","catch","err","console","log","atualizarListaAlunos","event","target","value","Number","listaDeAlunos","getListaAlunosDoCurso","Array","isArray","filter","aluno","renderSelect","e","map","renderCards","length","nome","ra"],"sources":["/Users/u21816/escola/DsWebIII/escola/src/components/Carometro/Carometro.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport axios from 'axios';\nimport './Carometro.css';\n//import Card from 'react-bootstrap/Card';\n//import 'bootstrap'\nimport Main from '../template/Main';\n\nconst API_URL_ALUNOS = \"http://localhost:5255/api/aluno\"\nconst API_URL_CURSOS = \"http://localhost:5255/api/curso\"\n\nconst getRandomLetter = () => {\n    return Math.random().toString(36).substring(2, 9);\n}\n\nexport default function CrudCarometro(props) {\n    const initialState = {\n        curso: { id: 0, codCurso: \"\", nomeCurso: \"\", periodo: \"\" },\n        listaAlunos: [],\n        listaCursos: [],\n    }\n\n    const title = \"Carômetro dos Alunos\";\n    const [listaAlunos, setListaAlunos] = useState(initialState.listaAlunos);\n    const [listaCursos, setListaCursos] = useState(initialState.listaCursos);\n    const [curso, setCurso] = useState(initialState.curso);\n\n    useEffect(() => {\n        axios(API_URL_CURSOS)\n            .then((resp) => setListaCursos(resp.data))\n            .catch((err) => {\n                console.log(err);\n\n                //sendMultipleErrorPopUp(err);\n            });\n    }, []);\n\n    const atualizarListaAlunos = async (event) => {\n        const codCurso = event.target.value;\n        if (event.target.value === \"\") {\n            setListaAlunos(initialState.listaAlunos);\n            setCurso(initialState.curso);\n            return\n        }\n        curso.codCurso = Number(codCurso)\n        const listaDeAlunos = await getListaAlunosDoCurso(curso.codCurso)\n        if(!Array.isArray(listaDeAlunos)) return\n\n        setListaAlunos(listaDeAlunos)\n        setCurso(curso)\n    }\n\n    const getListaAlunosDoCurso = async (codCurso) => {\n        return await axios(API_URL_ALUNOS)\n        .then((resp) => {\n            const listaDeAlunos = resp.data;\n            return listaDeAlunos.filter(\n                (aluno) => aluno.codCurso === codCurso\n            );\n        })\n        .catch((err) => {\n            console.log(err);\n\n            //sendMultipleErrorPopUp(err);\n        });\n    }\n\n    const renderSelect = () => {\n        return (\n            <div className=\"select-container\">\n                <label> Curso: </label>\n                <select className=\"selectCarometro\" value={curso.codCurso}  onChange={e => { atualizarListaAlunos(e)}} required>\n                    <option disabled={true} key=\"\" value=\"\">  -- Escolha um curso -- </option>\n                    {listaCursos.map( (curso) =>\n                            <option  key={curso.id} name=\"codCurso\" value={curso.codCurso}>\n                                { curso.codCurso } - { curso.nomeCurso } : { curso.periodo }\n                            </option>\n                    )}\n                </select>\n            </div>\n        );\n    };\n\n\n    const renderCards = () =>(\n        <div className=\"card-row\">\n            {Array.isArray(listaAlunos) && listaAlunos.length > 0 ?\n            listaAlunos.map((aluno) => (\n                <div key={aluno.id} className=\"card draw-border\">\n                    <img  className=\"card__image\" src={`https://avatars.dicebear.com/api/big-smile/${getRandomLetter()}.svg`} alt={`Avatar de `+ aluno.nome}/>\n                    <span className=\"card-title\">{aluno.nome}</span>\n                    <span className=\"card-description\">RA: {aluno.ra} | Curso: {aluno.codCurso}</span>\n                </div>\n            )) : null}\n        </div>\n    )\n\n    return (\n        <div className=\"container carometro\">\n            <Main title={title} />\n            {renderSelect()}\n            <main>\n                <div className=\"card-container\">\n                    {renderCards()}\n                </div>\n            </main>\n        </div>\n    );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}